__README__
==========

Данное финансовое приложение представляет собой набор приложений с возможностями регистрации пользователей, открытия и 
закрытия счетов, их пополнения и обналичивания, сервисами перевода денег между своими счетами, и на счета других 
пользователей, а также виджетом с обновляющимися курсами валют.

Использованный стек: Java SE 21, Spring Boot, Spring Security, JPA, PostgreSQL, Eureka Discovery Service, 
Spring Gateway, Spring Cloud Config, Spring Retry, Keycloak, REST, Gradle, Lombok,
Thymeleaf, JUnit 5, Mockito, Docker.

Установка и запуск:
-----------------------------------

1) Склонируйте репозиторий.

2) Запустите сборку приложения - с помощью IDE или в корневой директории репозитория командой:
```
   gradlew.bat build
```

3) Запустите приложение в Docker - с помощью IDE или в корневой директории репозитория командой:
```
   docker-compose up --build -d
```

4) Приложение станет доступно по адресу:
```
http://localhost:8888
```

Функционал приложения:
------------------------------------------

**Регистрация приложении**

``` http://localhost:8888 ``` автоматически перенаправляет на ``` http://localhost:8888/login ```. На этой странице 
нужно начать на кнопку "Регистрация", чтобы перейти на ``` http://localhost:8888/signup ```. На этой странице 
нужно заполнить форму и отправить форму с данными (логин, имя, пароль, дата рождения, email). 

Регистрация невозможна, если уже есть пользователь с таким логином или email, если пользователю нет 18 лет, 
если пароль не совпадает, если указан email неправильного формата. В таком случае будет выдано сообщение об ошибке. 

В случае успешной регистрации сработает перенаправление на ``` http://localhost:8888/login ```.

**Авторизация в приложении**

На странице ``` http://localhost:8888/login ``` нужно заполнить логин и пароль. В случае успешной авторизации 
произойдет перенаправление на ``` http://localhost:8888/main ```. Это страница личного кабинета, доступная только 
авторизированному пользователю. Разлогиниться можно с помощью кнопки "Выйти".

**Редактирование профиля**

Можно поменять пароль в верхнем блоке. Если пароль не совпадает, будет выдано сообщение об ошибке.
Также можно поменять имя, email и дату рождения. Текущие данные  указаны слева от формы. 
В форме нужно заполнить все поля. Требования к email и возрасту здесь также применимы.

**Счета**

Можно открыть счета в следующих валютах - рубль, доллар, юань. Пустой счет можно закрыть. При попытке 
закрыть счет с положительным балансом будет выдано сообщение об ошибке. Открытие/закрытие счетов 
регулируется чекбоксами справа. Можно иметь только 1 счет на 1 валюту.

**Переводы**

Переводы можно делать на другие свои счета и на счета других пользователей. 

Для перевода на другой свой 
счет нужно выбрать оба счета в соответствующих меню, ввести сумму, и нажать на кнопку. Нельзя выбирать 
один и тот же счет в обеих меню.

Для перевода другому пользователю в одном меню нужно выбрать свой счет, а в другом - счет другого пользователя с 
нужной валютой (в каждом пункте пользователь + его счет). В этом меню указываются только счета пользователей, 
имеющиеся в базе приложения.

**Блокирование операций**

В приложении реализовано блокирование переводов, снятия/пополнения счетов по заданным условиям. 
В настоящее время условия - пополнение/снятие больше чем на 500 единиц, перевод больше чем на 
1000 единиц.

**Уведомления**

В приложении реализованы уведомления. После блокирования операции или успешного перевода, 
пользователю придет уведомление на почту. В настоящее время в приложении подключен демонстрационный почтовый 
сервер *Mailhog*, у которого можно посмотреть отправленные письма на ``` http://localhost:8025/ ```.

**Виджет валют**

Внизу страницы ежесекундно обновляются курсы валют.

Структура приложения:
------------------------------------------

Приложение состоит из следующих микросервисов:

1. **Front service** — пользовательский интерфейс.
2. **Account service** — сервис, отвечающий за хранение и изменение данных пользователей и данных их счетов; балансы счетов; 
открытие и закрытие счетов.
3. **Transfer service** - сервис, отвечающий за обработку переводов.
4. **Cash service** - сервис, отвечающий за пополнение/снятие денег.
5. **Exchange service** - сервис, отвечающий за конвертацию курсов валют между собой.
6. **Exchange generator service** - сервис, отвечающий за генерацию курсов валют. Содержит логику генерации и список доступных 
в приложении валют.
7. **Blocker service** — сервис, отвечающий за блокировку операций. Содержит логику блокирования.
8. **Notification service** — сервис отправки уведомлений. Содержит данные подключенного почтового сервиса (сейчас - *Mailhog*).
9. **Gateway service**, **Eureka service**, **Config service** — технические сервисы.

Тесты
------------------------------------------

К приложению прилагаются тесты.